<section id="counselorPanel" class="panel" style="display:none;">
  <h2>Counselor Dashboard</h2>

  <div id="counselorLoginArea" class="card">
    <h3>Counselor Sign In</h3>
    <div class="row">
      <label>Password
        <input id="counselorPassInput" type="password" placeholder="Admin password"/>
      </label>
      <button id="counselorLoginBtn">Sign In</button>
    </div>
    <div id="counselorLoginMsg" class="msg"></div>
  </div>

  <div id="counselorDashboard" class="card" style="display:none;">
    <div class="row spaceBetween">
      <div class="infoBlock">
        Use filters to find students. Students who have saved a schedule are highlighted green, others red.
      </div>
      <button id="logoutCounselorBtn" class="danger" style="display:none;">Sign Out</button>
    </div>

    <div class="grid2">
      <div class="subcard">
        <h3>Submission Locks</h3>
        <div id="gradeLockControls"></div>
        <div class="row">
          <button id="saveGradeLocksBtn">Save Locks</button>
          <div id="gradeLockMsg" class="msg"></div>
        </div>
      </div>

      <div class="subcard">
        <h3>Subject/Area Colors</h3>
        <table class="simpleTable">
          <thead><tr><th>Subject</th><th>Color</th></tr></thead>
          <tbody id="subjectColorTbody"></tbody>
        </table>
        <div class="row">
          <button id="saveSubjectColorsBtn">Save Colors</button>
          <div id="colorSaveMsg" class="msg"></div>
        </div>
      </div>
    </div>

    <div class="subcard">
      <h3>Help / Templates</h3>
      <div class="row wrap">
        <a class="buttonlike" href="/download_template/students" target="_blank">Download Students Template</a>
        <a class="buttonlike" href="/download_template/courses" target="_blank">Download Courses Template</a>
        <a class="buttonlike" href="/download_template/teachers" target="_blank">Download Teachers Template</a>
        <a class="buttonlike" href="/download_template/schedules" target="_blank">Download Schedules Template</a>
      </div>
    </div>

    <div class="subcard">
      <h3>Upload CSVs</h3>
      <div class="row wrap">
        <label>Students CSV <input id="studentsCsvInput" type="file" accept=".csv"/></label>
        <label>Courses CSV <input id="coursesCsvInput" type="file" accept=".csv"/></label>
        <label>Teachers CSV <input id="teachersCsvInput" type="file" accept=".csv"/></label>
        <button id="uploadCsvBtn">Upload</button>
      </div>
      <div id="uploadMsg" class="msg"></div>
    </div>

    <div class="subcard">
      <h3>Student List</h3>
      <div class="row wrap">
        <label>Name <input id="filterName" type="text" placeholder="Search name"/></label>
        <label>Grade
          <select id="filterGrade">
            <option value="">All</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
          </select>
        </label>
        <label>Course <input id="filterCourse" type="text" placeholder="Search course"/></label>
        <button id="applyFiltersBtn">Apply</button>
        <button id="exportFilteredBtn">Export Filtered</button>
        <button id="exportAllSchedulesBtn">Export All Schedules</button>
      </div>

      <div class="row wrap" style="align-items:center;margin-top:8px;">
        <div id="studentCount" class="countBadge" style="margin-right:12px;"></div>

        <label style="margin-right:8px;">Show
          <select id="perPageSelect">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50" selected>50</option>
            <option value="100">100</option>
            <option value="all">All</option>
          </select>
        </label>

        <div id="paginationControls" class="paginationControls" style="display:inline-flex;align-items:center;margin-left:12px;">
          <button id="pagePrevBtn" class="smallBtn" style="margin-right:6px;">Prev</button>
          <span id="pageInfo" class="dimtext">Page 1</span>
          <button id="pageNextBtn" class="smallBtn" style="margin-left:6px;">Next</button>
        </div>
      </div>

      <table class="simpleTable" style="margin-top:8px;">
        <thead>
          <tr>
            <th>Select</th>
            <th>Student</th>
            <th>Academic (preview)</th>
            <th>Elective #1</th>
            <th>Approvals</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="counselorStudentRows"></tbody>
      </table>

      <div class="row wrap" style="margin-top:8px;">
        <button id="printCardsSelectedBtn">Print Cards (Selected)</button>
        <button id="printCardsAllBtn">Print Cards (All in view)</button>
        <label>Roster by Course Code <input id="rosterCourseCode" type="text" placeholder="ex: BIO"/></label>
        <button id="rosterPrintBtn">Print Roster</button>
      </div>
    </div>
  </div>

  <!-- Modal overlay for editing a student's schedule -->
  <div id="editScheduleModal" class="modal" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:9999;">
    <div class="modalInner" style="max-width:960px;margin:40px auto;background:#fff;border-radius:8px;padding:18px;position:relative;box-shadow:0 6px 20px rgba(0,0,0,0.4);">
      <button id="editModalCloseBtn" class="smallBtn" style="position:absolute;right:12px;top:12px;">Close</button>
      <h3>Edit Student Schedule</h3>
      <div id="editScheduleInfo" class="infoBlock" style="margin-bottom:8px;"></div>

      <div style="display:flex;gap:12px;flex-wrap:wrap;">
        <div style="flex:1 1 320px;">
          <h4>Selected Academic (up to <span id="cMaxAcademicSpan"></span>)</h4>
          <div id="cSelectedAcademicList" style="min-height:80px;border:1px solid #eee;padding:8px;border-radius:4px;"></div>
        </div>

        <div style="flex:1 1 320px;">
          <h4>Elective / CTE Priorities (up to <span id="cMaxElectiveSpan"></span>)</h4>
          <div id="cSelectedElectiveList" style="min-height:80px;border:1px solid #eee;padding:8px;border-radius:4px;"></div>
        </div>
      </div>

      <div style="margin-top:12px;">
        <h4>Special Instructions</h4>
        <textarea id="counselorNotesInput" rows="3" style="width:100%;"></textarea>
      </div>

      <div style="margin-top:12px;">
        <h4>Add Courses</h4>
        <div class="row wrap">
          <label>Subject <input id="cFilterSubject" type="text" placeholder="ex: Science"/></label>
          <label>Search <input id="cFilterNameSearch" type="text" placeholder="ex: BIO"/></label>
          <button id="cRunCourseSearchBtn">Search</button>
        </div>
        <div id="cAvailableCoursesGrid" class="availableCoursesGrid" style="margin-top:8px;"></div>
      </div>

      <div class="row wrap" style="margin-top:12px;">
        <button id="saveCounselorScheduleBtn">Save</button>
        <button id="resetScheduleBtn" class="danger">Reset Schedule</button>
        <button id="deleteStudentBtn" class="danger">Delete Student</button>
        <div id="editScheduleMsg" class="msg" style="margin-left:12px;"></div>
      </div>
    </div>
  </div>
</section>